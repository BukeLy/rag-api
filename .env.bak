

# ============================================================
# RAG API 配置文件
# ============================================================
# 使用说明：
# 1. 复制此文件为 .env：cp env.example .env
# 2. 填入真实的 API 密钥
# 3. 根据需要调整可选配置
# ============================================================

# ====== LLM 配置（豆包/火山引擎） ======
# 用于文本生成、实体提取、关系提取等
ARK_API_KEY="d960873a-6e38-4568-a996-82b367109b42"
ARK_BASE_URL="https://ark.ap-southeast.bytepluses.com/api/v3"
# 使用的模型名称
ARK_MODEL=seed-1-6-250615

# ====== Embedding 配置（硅基流动） ======
# 用于向量化文本，支持语义检索
SF_BASE_URL="https://api.siliconflow.cn/v1"
SF_API_KEY="sk-cqzlbhgcpdrpjjixnirjkkdjdygbdhsdgiatgfaudmpeaafj"
# 使用的 Embedding 模型（4096 维向量）
SF_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-8B

# ====== Rerank 配置（重排序模型） ======
# 用于提升检索结果的相关性（可选但推荐）
# 使用硅基流动的 Rerank API（复用上面的 SF_API_KEY）
# 推荐模型：Qwen/Qwen3-Reranker-8B
# 留空则禁用 rerank 功能
RERANK_MODEL=Qwen/Qwen3-Reranker-8B

# ====== MinerU 配置 ======

# --- MinerU 运行模式 ---
# 选项：
#   local  - 本地运行 MinerU（需要 GPU、大内存）
#   remote - 使用远程 MinerU API（推荐，节省资源）
MINERU_MODE=remote

# --- 远程 MinerU API 配置 ---
# 官方文档：https://mineru.net/apiManage/docs
# 注册地址：https://mineru.net（免费账号每天 2000 页额度）
# 优势：无需 GPU、无需下载模型、降低本地资源消耗
# 注意：只需要一个 Token（在官网申请）
MINERU_API_TOKEN=eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFM1MTIifQ.eyJqdGkiOiIzMjkwMDY4OCIsInJvbCI6IlJPTEVfUkVHSVNURVIiLCJpc3MiOiJPcGVuWExhYiIsImlhdCI6MTc2MDUyOTI5OCwiY2xpZW50SWQiOiJsa3pkeDU3bnZ5MjJqa3BxOXgydyIsInBob25lIjoiIiwib3BlbklkIjpudWxsLCJ1dWlkIjoiZTg4NTMxNjMtNmEwOC00NzllLWE2YzEtYjk1YjY1ZjY5YmMyIiwiZW1haWwiOiIiLCJleHAiOjE3NjE3Mzg4OTh9.wpa_CwUVw3-fdfirCjbeoi--7DtTMOjAt_wGa_mWJDxr-DDHJmjHoaS_YkWwN5CyPEr0Gx_a7eTSGhQZKxvVDQ
MINERU_API_BASE_URL=https://mineru.net

# --- 远程 MinerU 限流配置 ---
# 根据您的 API 套餐调整
MINERU_MAX_CONCURRENT_REQUESTS=5     # 最大并发请求数
MINERU_REQUESTS_PER_MINUTE=60        # 每分钟最大请求数
MINERU_RETRY_MAX_ATTEMPTS=3          # 失败重试次数
MINERU_POLL_TIMEOUT=600              # 任务轮询超时（秒）

# ====== 系统配置 ======

# --- 日志配置 ---
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# --- 文件上传限制 ---
MAX_UPLOAD_SIZE=104857600  # 100MB (字节)

# --- 工作目录 ---
WORKING_DIR=./rag_local_storage

# --- 文档处理并发控制 ---
# 限制同时处理的文档数量，防止 OOM
DOCUMENT_PROCESSING_CONCURRENCY=1

# ====== LightRAG 查询优化参数 ======
# 用于控制查询性能和质量的平衡

# --- 检索参数 ---
# top_k: 检索的实体/关系数量（默认 60，推荐 20-40）
# 数值越大，检索越全面但速度越慢
TOP_K=20

# chunk_top_k: 检索的文本块数量（默认 20，推荐 10-20）
CHUNK_TOP_K=10

# --- Token 限制 ---
# 控制 LLM 调用时的上下文大小
MAX_ENTITY_TOKENS=6000      # 实体上下文最大 token 数
MAX_RELATION_TOKENS=8000    # 关系上下文最大 token 数
MAX_TOTAL_TOKENS=30000      # 总 token 数限制

# --- 并发配置 ---
# LightRAG 内部并发参数
MAX_ASYNC=4                 # LLM 最大并发请求数
MAX_PARALLEL_INSERT=2       # 文档插入最大并发数

# ====== 可选配置 ======

# --- 时区 ---
TZ=Asia/Shanghai

# --- Python 配置 ---
PYTHONUNBUFFERED=1  # 禁用输出缓冲，实时查看日志

