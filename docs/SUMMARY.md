# RAG API é¡¹ç›®æ€»ç»“

## é¡¹ç›®å®Œæˆåº¦

âœ… **æ ¸å¿ƒåŠŸèƒ½ - 100%**
- æ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†
- æ™ºèƒ½æŸ¥è¯¢ï¼ˆmix æ¨¡å¼ï¼‰
- VLM å¤šæ¨¡æ€æ”¯æŒ
- é”™è¯¯å¤„ç†å’ŒéªŒè¯

âœ… **å®‰å…¨æ€§ - 100%**
- UUID æ–‡ä»¶åï¼ˆé˜²è·¯å¾„éå†ï¼‰
- æ–‡ä»¶éªŒè¯ï¼ˆå¤§å°ã€æ ¼å¼ï¼‰
- æ‰©å±•åå®‰å…¨æ£€æŸ¥
- åˆ†å±‚é”™è¯¯å¤„ç†

âœ… **æ–‡æ¡£ - 100%**
- å¿«é€Ÿå…¥é—¨ (README.md)
- è¯¦ç»†ä½¿ç”¨æŒ‡å— (USAGE.md)
- æŠ€æœ¯æ”¹è¿›è¯´æ˜ (IMPROVEMENTS.md)
- å¯é€‰åŠŸèƒ½æ¸…å• (OPTIONAL_ENHANCEMENTS.md)
- é¡¹ç›®ç»“æ„è¯´æ˜ (PROJECT_STRUCTURE.md)

âœ… **æµ‹è¯• - 100%**
- API åŠŸèƒ½æµ‹è¯•
- å®‰å…¨æ€§æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•
- æ‰€æœ‰æµ‹è¯•é€šè¿‡

## é¡¹ç›®æ–‡ä»¶ç»„ç»‡

### ğŸ“ æ ¸å¿ƒä»£ç 
```
main.py              # API ç«¯ç‚¹å®ç°ï¼ˆ141 è¡Œï¼‰
src/rag.py          # RAG å®ä¾‹ç®¡ç†ï¼ˆ87 è¡Œï¼‰
```

### ğŸ“š æ–‡æ¡£ï¼ˆdocs/ï¼‰
```
USAGE.md            # è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼ˆ~400 è¡Œï¼‰
IMPROVEMENTS.md     # æŠ€æœ¯æ”¹è¿›è¯´æ˜ï¼ˆ~150 è¡Œï¼‰
OPTIONAL_ENHANCEMENTS.md  # å¯é€‰åŠŸèƒ½æ¸…å•ï¼ˆ~200 è¡Œï¼‰
PROJECT_STRUCTURE.md      # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆ~300 è¡Œï¼‰
SUMMARY.md          # æœ¬æ–‡ä»¶
```

### ğŸ”§ å·¥å…·ï¼ˆscripts/ï¼‰
```
test_api.py         # API æµ‹è¯•è„šæœ¬ï¼ˆ~220 è¡Œï¼‰
```

## æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: FastAPI
- **RAG å¼•æ“**: RAG-Anything 1.2.8 + LightRAG 1.4.9.2
- **Embedding**: Qwen3-Embedding-8B (4096d)
- **LLM**: seed-1-6-250615
- **åŒ…ç®¡ç†**: UV

## å…³é”®æ”¹è¿›ç‚¹

### 1. å®‰å…¨æ€§
- âœ… UUID æ–‡ä»¶åç”Ÿæˆ
- âœ… è·¯å¾„éå†æ”»å‡»é˜²æŠ¤
- âœ… æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ100MBï¼‰
- âœ… æ‰©å±•åéªŒè¯

### 2. é”™è¯¯å¤„ç†
- âœ… åˆ†å±‚å¼‚å¸¸æ•è·ï¼ˆValueError, MineruExecutionError, OSErrorï¼‰
- âœ… HTTP çŠ¶æ€ç è¯­ä¹‰åŒ–ï¼ˆ400 vs 500ï¼‰
- âœ… è¯¦ç»†é”™è¯¯ä¿¡æ¯
- âœ… é˜²å¾¡æ€§ä¸´æ—¶æ–‡ä»¶æ¸…ç†

### 3. æ–‡ä»¶éªŒè¯
- âœ… ç©ºæ–‡ä»¶æ£€æµ‹
- âœ… æ–‡ä»¶å¤§å°æ£€æŸ¥
- âœ… æ‰©å±•ååˆæ³•æ€§éªŒè¯

### 4. å¤šæ¨¡æ€æ”¯æŒ
- âœ… å›¾ç‰‡å¤„ç†ï¼ˆVLMï¼‰
- âœ… è¡¨æ ¼å¤„ç†
- âœ… å…¬å¼å¤„ç†ï¼ˆLaTeXï¼‰

## API ç«¯ç‚¹

### POST /insert
**åŠŸèƒ½**: ä¸Šä¼ å¹¶å¤„ç†æ–‡æ¡£
**å‚æ•°**: 
- `doc_id` (query): æ–‡æ¡£ ID
- `file` (body): æ–‡ä»¶

**å“åº”**:
```json
{
  "message": "Document processed successfully",
  "doc_id": "...",
  "filename": "..."
}
```

### POST /query
**åŠŸèƒ½**: æ™ºèƒ½æŸ¥è¯¢
**å‚æ•°**:
```json
{
  "query": "é—®é¢˜",
  "mode": "mix"
}
```

**å“åº”**:
```json
{
  "answer": "ç­”æ¡ˆ\n\n### References\n\n- [1] ..."
}
```

### GET /
**åŠŸèƒ½**: å¥åº·æ£€æŸ¥
**å“åº”**:
```json
{
  "status": "RAG API is running"
}
```

## æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- âœ… æ­£å¸¸æ–‡ä»¶ä¸Šä¼ 
- âœ… æ–‡æ¡£æŸ¥è¯¢
- âœ… å¥åº·æ£€æŸ¥

### å®‰å…¨æµ‹è¯•
- âœ… è·¯å¾„éå†æ”»å‡»ï¼ˆ`../../etc/passwd`ï¼‰
- âœ… æ¶æ„æ–‡ä»¶åå¤„ç†
- âœ… æ‰©å±•åéªŒè¯

### è¾¹ç•Œæµ‹è¯•
- âœ… ç©ºæ–‡ä»¶å¤„ç†ï¼ˆè¿”å› 400ï¼‰
- âœ… å¤§æ–‡ä»¶é™åˆ¶ï¼ˆ> 100MB è¿”å› 400ï¼‰
- âœ… ä¸æ”¯æŒæ ¼å¼ï¼ˆè¿”å› 400ï¼‰

## éƒ¨ç½²æ¸…å•

### ç¯å¢ƒå‡†å¤‡
```bash
# 1. ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å†™ API å¯†é’¥

# 2. æ¸…ç†æ—§æ•°æ®
rm -rf ./rag_local_storage

# 3. å®‰è£…ä¾èµ–
uv sync
```

### å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼
uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000

# ç”Ÿäº§æ¨¡å¼
uv run uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

### éªŒè¯éƒ¨ç½²
```bash
# 1. å¥åº·æ£€æŸ¥
curl http://localhost:8000/

# 2. è¿è¡Œæµ‹è¯•
uv run python scripts/test_api.py

# 3. æŸ¥çœ‹æ–‡æ¡£
open http://localhost:8000/docs
```

## æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
- æ–‡æ¡£ä¸Šä¼ : < 30s (å–å†³äºæ–‡ä»¶å¤§å°å’Œå¤æ‚åº¦)
- æŸ¥è¯¢å“åº”: < 5s
- å¥åº·æ£€æŸ¥: < 100ms

### å¹¶å‘èƒ½åŠ›
- æ¨è workers: 4
- æœ€å¤§æ–‡ä»¶å¤§å°: 100MB
- æ”¯æŒæ ¼å¼: PDF, DOCX, TXT, å›¾ç‰‡ç­‰

### èµ„æºä½¿ç”¨
- CPU: ä¸­ç­‰ï¼ˆLLM è°ƒç”¨æ—¶è¾ƒé«˜ï¼‰
- å†…å­˜: ~2-4GB (å–å†³äºæ–‡æ¡£é‡)
- ç£ç›˜: éšæ–‡æ¡£é‡çº¿æ€§å¢é•¿

## å·²çŸ¥é™åˆ¶

1. **å•æ–‡ä»¶å¤„ç†**: å½“å‰åªæ”¯æŒå•æ–‡ä»¶ä¸Šä¼ 
   - å¯é€‰æ”¹è¿›: æ‰¹é‡æ–‡ä»¶å¤¹å¤„ç†

2. **æ–‡ä»¶å¤§å°**: é™åˆ¶ 100MB
   - å¯æ ¹æ®æœåŠ¡å™¨è°ƒæ•´

3. **å¹¶å‘å¤„ç†**: æ–‡æ¡£å¤„ç†ä¸²è¡Œ
   - å¯é€‰æ”¹è¿›: å¹¶å‘å¤„ç†é˜Ÿåˆ—

4. **å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
   - å¯é€‰æ”¹è¿›: åˆ†å¸ƒå¼å­˜å‚¨

## åç»­å¯é€‰åŠŸèƒ½

è¯¦è§ [å¯é€‰åŠŸèƒ½æ¸…å•](OPTIONAL_ENHANCEMENTS.md)

- æ‰¹é‡æ–‡ä»¶å¤¹å¤„ç†
- å¤šæ¨¡æ€æŸ¥è¯¢ç«¯ç‚¹
- VLM å¢å¼ºå¼€å…³
- é«˜çº§è§£æå‚æ•°

## æ–‡æ¡£å¯¼èˆª

- [README.md](../README.md) - å¿«é€Ÿå¼€å§‹
- [USAGE.md](USAGE.md) - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - æŠ€æœ¯æ”¹è¿›
- [OPTIONAL_ENHANCEMENTS.md](OPTIONAL_ENHANCEMENTS.md) - å¯é€‰åŠŸèƒ½
- [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„

## ç‰ˆæœ¬å†å²

### v0.1.0 (2025-10-13)
- âœ… åˆå§‹ç‰ˆæœ¬
- âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ
- âœ… å®‰å…¨æ€§æ”¹è¿›
- âœ… å®Œæ•´æ–‡æ¡£
- âœ… æµ‹è¯•è¦†ç›–

## è”ç³»æ–¹å¼

é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œå†…éƒ¨ä½¿ç”¨ã€‚

---

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¢ ç”Ÿäº§å°±ç»ª

**æœ€åæ›´æ–°**: 2025-10-13

Â© 2025 RAG API Project

