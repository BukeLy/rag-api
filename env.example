# ====== RAG-API 环境配置（精简版）======
# 只保留推荐的技术栈，删除所有不推荐的配置
# 推荐架构：DragonflyDB + Qdrant + Memgraph

# ====== LLM 配置（豆包大模型）======
ARK_API_KEY=your_ark_api_key_here
ARK_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
ARK_MODEL=seed-1-6-250615

# ====== Embedding 配置（火山引擎）======
SF_API_KEY=your_sf_api_key_here
SF_BASE_URL=https://api-vikingdb.volces.com/api/embeddings/v2
SF_EMBEDDING_MODEL=Qwen/Qwen3-Embedding-0.6B  # 1024 维度（配合 Rerank）

# ⚠️ Embedding 维度配置（极其重要）
# 必须与模型匹配：
# - Qwen3-Embedding-0.6B → 1024 维度（当前配置，配合 Rerank 效果好）
# - Qwen3-Embedding-8B → 4096 维度（更高精度，需更多资源）
EMBEDDING_DIM=1024

# ====== Rerank 配置（可选）======
# 提升检索质量，但会增加 2-3 秒延迟
RERANK_MODEL=Qwen/Qwen2-7B-Instruct  # 可选

# ====== 存储架构配置 ======
USE_EXTERNAL_STORAGE=true

# KV 存储：DragonflyDB（Redis 协议兼容）
KV_STORAGE=RedisKVStorage
REDIS_URI=redis://dragonflydb:6379/0

# 向量存储：Qdrant（无维度限制，支持 4096 维度）
VECTOR_STORAGE=QdrantVectorDBStorage
QDRANT_URL=http://qdrant:6333
# QDRANT_API_KEY=your_api_key  # 生产环境建议启用

# 图存储：Memgraph（比 Neo4j 快 50 倍）
GRAPH_STORAGE=MemgraphStorage
MEMGRAPH_URI=bolt://memgraph:7687
MEMGRAPH_USERNAME=  # Memgraph 默认无认证
MEMGRAPH_PASSWORD=

# ====== 性能配置 ======
# 检索参数（影响查询性能和质量）
TOP_K=20              # 实体/关系检索数量
CHUNK_TOP_K=10        # 文本块检索数量
MAX_ASYNC=16          # LLM 并发请求数（默认 4，建议 8-16）

# LLM 超时配置（秒）
LLM_TIMEOUT=900       # LLM 请求超时时间（默认 360，建议 600-900）

# 文档处理并发（根据 MinerU 模式调整）
# - local 模式：1-2（本地 GPU 内存限制）
# - remote 模式：10-20（远程 API 无限制）
DOCUMENT_PROCESSING_CONCURRENCY=10

# ====== MinerU 配置（文档解析）======
# 推荐：remote 模式（节省资源，性能更好）
MINERU_MODE=remote

# Remote 模式配置
MINERU_API_TOKEN=your_mineru_api_token_here
FILE_SERVICE_BASE_URL=http://your-public-ip:8000  # 必须是公网可访问地址
MINERU_MODEL_VERSION=vlm  # vlm: 更快更准确（推荐）| pipeline: 稳定

# ====== LightRAG WebUI 配置 ======
# WebUI 访问的租户（workspace）
LIGHTRAG_WEBUI_WORKSPACE=default

# API Key 认证（可选）
# LIGHTRAG_API_KEY=your_secret_key

# Web UI 登录账号（可选）
# LIGHTRAG_AUTH_ACCOUNTS='[{"username": "admin", "password": "your_password"}]'

# ====== 日志配置 ======
LOG_LEVEL=INFO
LOG_RETENTION_DAYS=7

# ====== 密码配置 ======
# Memgraph 默认无密码，如需启用认证请参考官方文档
# MEMGRAPH_PASSWORD=your_secure_password
